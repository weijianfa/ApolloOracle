# PingPong支付网关账户注册操作手册

本文档指导如何注册PingPong支付网关账户并获取API密钥，用于Telegram Bot的支付功能集成。

## 一、PingPong简介

PingPong是一家全球支付服务提供商，专注于为跨境电商和在线服务提供支付解决方案。它连接了Airwallex等支付基础设施，支持多种支付方式和货币。

## 二、注册前准备

### 2.1 所需材料

在开始注册之前，请准备以下材料：

1. **企业信息**（如果以企业身份注册）：
   - 公司营业执照
   - 公司银行账户信息
   - 公司地址证明
   - 法人身份证件

2. **个人信息**（如果以个人身份注册）：
   - 身份证或护照
   - 银行账户信息
   - 地址证明

3. **业务信息**：
   - 业务描述
   - 网站URL（如果有）
   - 预计月交易额
   - 主要销售地区

4. **联系方式**：
   - 邮箱地址
   - 手机号码
   - 公司电话（企业注册）

### 2.2 系统要求

- 支持的操作系统：Windows、macOS、Linux
- 浏览器：Chrome、Firefox、Safari、Edge（最新版本）
- 网络：稳定的互联网连接

## 三、注册流程

### 3.1 访问PingPong官网

1. 打开浏览器，访问PingPong官方网站：
   - 官网地址：https://www.pingpongx.com
   - 或搜索"PingPong支付"找到官方网站

2. 点击页面右上角的"注册"或"Sign Up"按钮

### 3.2 选择注册类型

PingPong通常提供两种注册类型：

1. **企业账户**（推荐）：
   - 适合有营业执照的企业
   - 更高的交易限额
   - 更完善的支付功能

2. **个人账户**：
   - 适合个人开发者或小规模业务
   - 交易限额较低
   - 审核流程相对简单

**建议**：如果您的Telegram Bot是商业项目，建议注册企业账户。

### 3.3 填写注册信息

#### 3.3.1 基本信息

根据选择的注册类型，填写以下信息：

**企业账户需要填写：**
- 公司名称（中英文）
- 统一社会信用代码/营业执照号
- 公司注册地址
- 公司经营地址
- 法人姓名
- 法人身份证号
- 联系人姓名
- 联系人邮箱
- 联系人手机号

**个人账户需要填写：**
- 姓名（中英文）
- 身份证号/护照号
- 居住地址
- 邮箱地址
- 手机号码

#### 3.3.2 业务信息

- **业务类型**：选择"在线服务"或"数字产品"
- **业务描述**：简要描述您的Telegram Bot业务
- **网站URL**：如果有网站，填写网站地址；如果没有，可以填写Telegram Bot链接
- **预计月交易额**：根据实际情况填写
- **主要销售地区**：选择您的主要目标市场

#### 3.3.3 银行账户信息

- 收款银行名称
- 银行账户号码
- 账户持有人姓名
- 开户行地址
- SWIFT代码（国际转账需要）

### 3.4 提交审核

1. 仔细检查填写的信息是否准确
2. 上传所需证件照片（确保清晰可见）
3. 阅读并同意服务协议和隐私政策
4. 点击"提交审核"按钮

### 3.5 等待审核

- **审核时间**：通常为1-3个工作日
- **审核状态**：可以在账户后台查看审核进度
- **审核通知**：审核结果会通过邮件和短信通知

**审核期间注意事项：**
- 保持手机和邮箱畅通
- 如有需要，PingPong客服可能会联系您补充材料
- 可以主动联系客服了解审核进度

## 四、账户激活后操作

### 4.1 登录账户

1. 审核通过后，使用注册时的邮箱和密码登录
2. 首次登录可能需要设置安全验证（如手机验证码）

### 4.2 获取API密钥

#### 4.2.1 进入开发者中心

1. 登录后，在账户后台找到"开发者中心"或"API管理"入口
2. 点击进入API管理页面

#### 4.2.2 创建API密钥

1. 在API管理页面，找到"创建API密钥"或"Generate API Key"按钮
2. 填写API密钥名称（例如："Telegram Bot Production"）
3. 选择API权限范围（通常选择"支付"相关权限）
4. 点击"创建"按钮

#### 4.2.3 保存API密钥

**重要提示**：API密钥只显示一次，请务必立即保存！

1. 复制显示的API Key（通常是一串长字符串）
2. 保存到安全的地方（建议使用密码管理器）
3. 不要将API密钥分享给他人或提交到代码仓库

#### 4.2.4 获取其他必要信息

除了API Key，您还需要获取以下信息：

1. **Merchant ID（商户ID）**：
   - 在账户信息页面可以找到
   - 通常是一串数字或字母数字组合

2. **Webhook Secret（Webhook密钥）**：
   - 在Webhook设置页面可以找到
   - 用于验证Webhook请求的签名
   - 如果没有，可以生成一个新的

3. **API Base URL（API基础地址）**：
   - 通常在API文档中提供
   - 例如：`https://api.pingpongx.com`
   - 注意：测试环境和生产环境可能不同

### 4.3 配置Webhook

#### 4.3.1 设置Webhook URL

1. 在账户后台找到"Webhook设置"或"回调设置"
2. 填写您的Webhook URL：
   ```
   https://your-domain.com/webhook/pingpong
   ```
   **注意**：
   - Webhook URL必须是HTTPS（HTTP不安全）
   - 需要是公网可访问的地址
   - 开发环境可以使用ngrok等工具创建临时HTTPS地址

3. 选择需要接收的事件类型：
   - 支付成功
   - 支付失败
   - 退款成功
   - 退款失败

#### 4.3.2 验证Webhook

1. 保存Webhook设置后，PingPong可能会发送一个测试请求
2. 确保您的服务器能够正确接收和处理测试请求
3. 如果验证失败，检查：
   - URL是否正确
   - 服务器是否正常运行
   - HTTPS证书是否有效

## 五、配置到项目中

### 5.1 更新环境变量

将获取的API信息配置到项目的`.env`文件中：

```bash
# PingPong Payment配置
PINGPONG_API_KEY=your_api_key_here
PINGPONG_WEBHOOK_SECRET=your_webhook_secret_here
PINGPONG_MERCHANT_ID=your_merchant_id_here
```

### 5.2 验证配置

1. 检查`.env`文件中的配置是否正确
2. 确保没有多余的空格或引号
3. 重启Bot服务使配置生效

### 5.3 测试支付功能

1. 在测试环境创建一个测试订单
2. 使用测试支付方式完成支付
3. 检查Webhook是否正常接收回调
4. 验证订单状态是否正确更新

## 六、常见问题

### 6.1 注册相关问题

**Q: 审核需要多长时间？**
A: 通常1-3个工作日，复杂情况可能需要更长时间。

**Q: 审核被拒绝怎么办？**
A: 查看拒绝原因，补充或修正材料后重新提交。

**Q: 可以同时注册多个账户吗？**
A: 通常一个企业只能注册一个账户，个人账户也有限制。

### 6.2 API相关问题

**Q: API密钥丢失了怎么办？**
A: 可以在API管理页面删除旧密钥并创建新密钥。注意：删除旧密钥后，使用旧密钥的请求将失效。

**Q: API调用有频率限制吗？**
A: 是的，PingPong通常对API调用有频率限制。具体限制请查看API文档。

**Q: 测试环境和生产环境的API密钥不同吗？**
A: 是的，通常测试环境和生产环境使用不同的API密钥和URL。

### 6.3 Webhook相关问题

**Q: Webhook URL必须是HTTPS吗？**
A: 是的，PingPong要求Webhook URL必须是HTTPS。

**Q: 如何测试Webhook？**
A: 可以使用PingPong提供的测试工具，或使用ngrok创建临时HTTPS地址。

**Q: Webhook签名验证失败怎么办？**
A: 检查Webhook Secret是否正确，签名算法是否按照文档实现。

### 6.4 支付相关问题

**Q: 支持哪些支付方式？**
A: 支持信用卡、借记卡、电子钱包等多种支付方式，具体请查看PingPong文档。

**Q: 支持哪些货币？**
A: 支持USD、EUR、GBP、JPY、HKD等多种货币，具体请查看PingPong文档。

**Q: 交易手续费是多少？**
A: 手续费根据交易类型和金额而定，具体费率请咨询PingPong客服。

## 七、安全建议

### 7.1 API密钥安全

1. **不要将API密钥提交到代码仓库**
   - 使用`.env`文件存储
   - 将`.env`添加到`.gitignore`
   - 不要将密钥分享给他人

2. **定期更换API密钥**
   - 建议每3-6个月更换一次
   - 如果怀疑密钥泄露，立即更换

3. **使用环境变量**
   - 生产环境使用环境变量而非配置文件
   - 限制API密钥的访问权限

### 7.2 Webhook安全

1. **验证签名**
   - 始终验证Webhook请求的签名
   - 不要处理未经验证的请求

2. **使用HTTPS**
   - Webhook URL必须使用HTTPS
   - 使用有效的SSL证书

3. **IP白名单**（如果支持）
   - 配置PingPong的IP白名单
   - 只接受来自白名单IP的请求

### 7.3 数据安全

1. **加密存储**
   - 敏感数据（如支付信息）加密存储
   - 使用强加密算法

2. **访问控制**
   - 限制对支付相关数据的访问
   - 记录所有访问日志

3. **定期备份**
   - 定期备份重要数据
   - 测试数据恢复流程

## 八、联系支持

### 8.1 获取帮助

如果在注册或使用过程中遇到问题，可以通过以下方式获取帮助：

1. **在线客服**：
   - 登录账户后台，使用在线客服功能
   - 工作时间：通常为工作日9:00-18:00

2. **邮件支持**：
   - 发送邮件到PingPong官方支持邮箱
   - 通常在1-2个工作日内回复

3. **电话支持**：
   - 拨打PingPong官方客服电话
   - 工作时间：通常为工作日9:00-18:00

4. **API文档**：
   - 查看PingPong官方API文档
   - 通常在开发者中心可以找到

### 8.2 技术支持

对于技术集成问题，可以：

1. 查看API文档和集成指南
2. 联系技术支持团队
3. 加入开发者社区（如果有）

## 九、后续步骤

注册并配置PingPong账户后，您可以：

1. ✅ 在项目中配置API密钥
2. ✅ 测试支付功能
3. ✅ 配置Webhook接收支付回调
4. ✅ 实现退款功能
5. ✅ 监控支付状态和异常

## 十、注意事项

1. **合规要求**：
   - 确保业务符合PingPong的服务条款
   - 遵守相关法律法规
   - 不要用于非法交易

2. **费率了解**：
   - 了解清楚各种费率
   - 计算实际成本
   - 考虑汇率波动影响

3. **测试环境**：
   - 先在测试环境充分测试
   - 确认所有功能正常后再上线
   - 准备应急预案

4. **监控告警**：
   - 设置支付异常监控
   - 配置告警通知
   - 及时处理问题

---

**文档版本**: v1.0  
**创建日期**: 2024-11-15  
**最后更新**: 2024-11-15  

**重要提示**：PingPong的具体注册流程和界面可能会随时间更新，如遇到与本文档不符的情况，请以PingPong官方网站和客服提供的信息为准。

